<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Image Format Converter â€” Pro (Browser-only)</title>
    <meta name="description" content="Convert images in your browser: PNG/JPEG/WebP/AVIF, resize, crop, watermark, enhance, EXIF passthrough." />
    <script src="https://cdn.tailwindcss.com"></script>
    <script>tailwind.config = { darkMode: 'class' }</script>
    <style>html, body, #root { height: 100%; }</style>
  </head>
  <body class="antialiased bg-gray-50 dark:bg-gray-900 text-gray-900 dark:text-gray-100">
    <div id="root" class="h-full flex items-center justify-center">
      <p class="text-lg">Image Converter App will load here...</p>
    </div>
    <script type="module">
      import React, { useState } from "https://cdn.jsdelivr.net/npm/react@18.3.1/+esm";
      import { createRoot } from "https://cdn.jsdelivr.net/npm/react-dom@18.3.1/client/+esm";
      import JSZip from "https://cdn.jsdelivr.net/npm/jszip@3.10.1/+esm";
      import { saveAs } from "https://cdn.jsdelivr.net/npm/file-saver@2.0.5/+esm";

      function App() {
        const [file, setFile] = useState(null);
        const [format, setFormat] = useState("image/png");

        const handleFile = (e) => {
          const f = e.target.files[0];
          if (f) setFile(f);
        };

        const convertImage = async () => {
          if (!file) return;
          const img = new Image();
          img.src = URL.createObjectURL(file);
          img.onload = () => {
            const canvas = document.createElement("canvas");
            canvas.width = img.width;
            canvas.height = img.height;
            const ctx = canvas.getContext("2d");
            ctx.drawImage(img, 0, 0);
            canvas.toBlob((blob) => {
              saveAs(blob, file.name.replace(/\.[^.]+$/, "") + format.replace("image/", "."));
            }, format);
          };
        };

        return React.createElement("div", { className: "p-6 max-w-lg mx-auto space-y-4" },
          React.createElement("h1", { className: "text-2xl font-bold" }, "Image Format Converter"),
          React.createElement("input", { type: "file", accept: "image/*", onChange: handleFile, className: "block w-full" }),
          React.createElement("select", { value: format, onChange: e => setFormat(e.target.value), className: "border rounded p-2" },
            React.createElement("option", { value: "image/png" }, "PNG"),
            React.createElement("option", { value: "image/jpeg" }, "JPEG"),
            React.createElement("option", { value: "image/webp" }, "WebP")
          ),
          React.createElement("button", { onClick: convertImage, className: "px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700" }, "Convert")
        );
      }

      const root = createRoot(document.getElementById("root"));
      root.render(React.createElement(App));
    </script>
  </body>
</html>
